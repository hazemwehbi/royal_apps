#PS: I already uploaded the dependencies package like Vendor + Node_modules to avoid the version conflict.

# BookStore Management

BookStore Management is a simple web application for manage book with the author.

  - Managing Author data
  - Managing Book data
  - Export Data to CSV & XML

### Tech Stack

BookStore management uses a number of open source projects to work properly:

* [Laravel](https://laravel.com) - Backend Rest API
* [Composer](https://getcomposer.org/) - Tool dependency management in PHP
* [Mysql](https://www.mysql.com/) - Database
* [Node.js](https://nodejs.org/en) - JavaScript runtime environment
* [NPM](https://www.npmjs.com/) - Package manager for the JavaScript
* [VueJS](https://vuejs.org) - Frontend Web
* [Cypress](https://www.cypress.io) - E2E Testing API & Web
* [Swagger](https://swagger.io) - API Documentation
* [Docker](https://www.docker.com) - App Container

### Requirements

BookStore management is currently extended with the following requirements. Instructions on how to use them in your own application are linked below.

| Requirement | Version |
| ------ | ------ |
| PHP | >= 8.0 |
| Mysql | >= 8.0.32 |
| NodeJS | >= 12.9.0 |
| NPM | >= 8.19.2 |
| Docker | >= 20.10.12 |

### Installation

Make sure you the requirements above already install on your system. Or you could easily run with Docker to make your environment clean.

Clone the project to your directory and install the dependencies.

```sh
$ composer install
$ npm install
```

Setup your environments.

```sh
$ cp .env.example .env
$ php artisan key:generate
```
Change your Mysql credentials depends on your Mysql installed config.
```sh
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=bookstore
DB_USERNAME=root
DB_PASSWORD=
```

### Migrate

Setup your migration and seed a default Superadmin user following by this command.

```sh
$ php artisan migrate
$ php artisan db:seed --class=UserSeeder
```

### CLI command to add a new user and author

```sh
$ php artisan make:user {--name=} {--email=} {--password=}
Ex: php artisan make:user --name=q.agency --email=ahsoka.tano@q.agency --password=Kryze4President

$ php artisan make:author {--name=} {--phone=} {--birthday=} {--address=}
Ex: php artisan make:author --name=Hazem --phone=0033617901952 --birthday=1986-01-10 --address=40_rue_de_vouille

```

#### Run Application
For run application:
```sh
$ npm run dev
$ php artisan serve
```

Verify the apllication by navigating to your server address in your preferred browser.

```sh
127.0.0.1:8000
```

### Docker
BookStore management is very easy to install and deploy in a Docker container. Simply use the docker-compose build to build the image.

```sh
$ docker-compose build
```
Once done, run the Docker image by using docker-compose up command.

```sh
$ docker-compose up -d
```

Setup the DB migration by using docker-compose exec command.
```sh
$ docker-compose exec app php artisan migrate
```

Verify the application by navigating to your server address in your preferred browser.

```sh
127.0.0.1:8000
```

Stop application could be done with docker-compose stop command.
```sh
$ docker-compose stop
```

### Swagger

BookStore management has Rest API Documentation generated by Swagger for understanding how's API work and/or want to extend to another platform.

See the documentation by navigating to your server address in your preferred browser.

```sh
127.0.0.1:8000/api/documentation
```

Generating the documentation if there's any changes on Swagger Annotation.
```sh
$ php artisan l5-swagger:generate
```
### Integration Testing

BookStore management has Integration Testing using PHPUnit & sqlite for testing both the API
Run this command for running the test:
```sh
$ vendor/phpunit/phpunit/phpunit
```

If running using docker:
```sh
docker-compose exec app vendor/phpunit/phpunit/phpunit
```

### E2E Testing

BookStore management has E2E Testing using Cypress for testing both the API & Web.

```sh
$ npm install
$ npx cypress open
```

Easily command with make:
```sh
$ make e2e
```

By default Cypress will be opened the GUI for run the test cases.
The URL for Cypress do E2E testing configured on `tests/E2E/cypress/support/constant.js`.
For changing the URL, easily to change the value from URL Constants.
```sh
const Constants = {
  URL: 'http://127.0.0.1:8000'
}
export default Constants
```

